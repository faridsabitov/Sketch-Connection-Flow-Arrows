{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/createArrow.js","webpack://exports/./src/draw.js","webpack://exports/./src/script.js","webpack://exports/./src/updateArrow.js","webpack://exports/./src/utilities/conditions.js","webpack://exports/./src/utilities/data.js","webpack://exports/./src/utilities/getSourceObject.js","webpack://exports/./src/utilities/groups.js","webpack://exports/./src/utilities/lines.js","webpack://exports/./src/utilities/styling.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["Settings","require","document","sketch","fromNative","context","createArrow","firstObjectID","secondObjectID","style","type","direction","conditionID","isCondition","localDirection","getDirection","updateSpacing","autoAlignLayer","arrow","drawConnection","connection","firstObject","secondObject","condition","line","objectID","getLayerWithID","firstObjectMidX","frame","x","width","firstObjectMidY","y","height","secondObjectMidX","secondObjectMidY","diffX","diffY","absDiffX","Math","abs","absDiffY","sourceObjectID","childObjectID","sourceObject","childObject","settingForKey","currentSpacing","sourceMidY","childMidY","sourceMidX","childMidX","diff","UI","docData","documentData","currentParentGroup","currentPage","currentArtboard","connectionPos","getConnectionPos","drawAngledLine","firstLayerPosX","firstLayerPosY","middlePosX","middlePosY","secondLayerPosX","secondLayerPosY","drawStraightLine","drawCurvedLine","log","updateCondition","addCondition","styleLine","addToArrowsGroup","firstObjectAbsPos","changeBasis","from","parent","to","secondObjectAbsPos","currentGroup","checkForGroup","path","NSBezierPath","bezierPath","moveToPoint","NSMakePoint","lineToPoint","MSShapeGroup","layerWithPath","MSPath","pathWithBezierPath","points","layers","cornerRadius","setName","curveMode","hasCurveFrom","hasCurveTo","curveFrom","curveTo","pluginKey","pluginData","connectionsData","command","valueForKey_onLayer_forPluginIdentifier","getConnectionsData","createAutoArrow","create","createRightArrow","createDownArrow","createLeftArrow","createUpArrow","createRightArrowWithCondition","createDownArrowWithCondition","createLeftArrowWithCondition","createUpArrowWithCondition","autoUpdateSelectedArrows","a","selection","count","class","getSourceObjectFromSelection","connectionIndex","g","String","index","length","push","message","deleteLine","deleteCondition","deleteConnectionFromData","setValue_forKey_onLayer_forPluginIdentifier","updateSelectedArrows","update","updateArtboardArrows","updateAllArrows","deleteSelectedArrows","deleteArtboardArrows","deleteAllArrows","level","isUpdate","newConnectionsData","firstObjectArtboard","secondObjectArtboard","i","updateArrow","sketchObject","parentArtboard","lineID","keyword","libraries","getLibraries","libraryObject","symbolReferences","symbol","getImportableSymbolReferencesForDocument","name","includes","alert","symbolMaster","import","createNewInstance","addToConditionGroup","conGroup","arGroup","arGroupX","arGroupY","fixGeometryWithOptions","id","conditionObject","selectedGroup","remove","dataArray","connectionIndexArray","data","splice","defineSourceObject","groupName","addLayers","Group","group","locked","moveToBack","adjustToFit","lineObject","localStyle","getLayerStyles","ownStyle","sharedStyle","border","addStylePartOfType","color","MSColor","colorWithRGBADictionary","r","b","thickness","endMarkerType","allStyles","allLayerStyles","styles"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","import sketch from 'sketch';\nimport { drawConnection } from \"./draw.js\";\n\nvar Settings = require('sketch/settings');\nlet document = sketch.fromNative(context.document);\n\n// Main Function\n\nexport function createArrow(firstObjectID, secondObjectID, style, type, direction, conditionID, isCondition) {  // Refactored\n  let localDirection = direction == \"Auto\" ? getDirection(firstObjectID, secondObjectID) : direction;\n\n  // Main Operations based on the settings\n  updateSpacing(firstObjectID, secondObjectID, localDirection);\n  autoAlignLayer(firstObjectID, secondObjectID, localDirection);\n\n  // Making an Arrow \n  let arrow = drawConnection(firstObjectID, secondObjectID, style, type, localDirection, conditionID, isCondition);\n  \n  // Storage for current connection\n  let connection = {\n    firstObject : firstObjectID,\n    secondObject : secondObjectID,\n    style : arrow.style,\n    condition : arrow.conditionID,\n    isCondition : isCondition,\n    type : arrow.type,\n    direction: localDirection,\n    line : arrow.line.objectID()\n  }\n  return connection;\n}\n\nfunction getDirection(firstObjectID, secondObjectID){ // Refactored\n  // Get direction from the source object\n  const firstObject = document.getLayerWithID(firstObjectID);\n  const secondObject = document.getLayerWithID(secondObjectID);\n  const firstObjectMidX = firstObject.frame.x+firstObject.frame.width/2;\n  const firstObjectMidY = firstObject.frame.y+firstObject.frame.height/2;\n  const secondObjectMidX = secondObject.frame.x+secondObject.frame.width/2;\n  const secondObjectMidY = secondObject.frame.y+secondObject.frame.height/2;\n\n  const diffX = firstObjectMidX - secondObjectMidX;\n  const diffY = firstObjectMidY - secondObjectMidY;\n  const absDiffX = Math.abs(diffX);\n  const absDiffY = Math.abs(diffY);\n  let direction;\n\n  if(secondObjectMidX > firstObjectMidX){\n    // Right Half\n    if(secondObjectMidY > firstObjectMidY){\n      // Bottom quarter\n      direction = diffX > diffY ? \"Down\" : \"Right\";\n    } else {\n      // Top quarter\n      direction = absDiffX > absDiffY ? \"Right\" : \"Up\";\n    }\n  } else {\n    // Left Half\n    if(secondObjectMidY > firstObjectMidY){\n      // Bottom quarter\n      direction = absDiffX > absDiffY ? \"Left\" : \"Down\";\n    } else {\n      // Top quarter\n      direction = diffX > diffY ? \"Left\" : \"Up\";\n    }\n  }\n\n  return direction;\n}\n\nfunction updateSpacing(sourceObjectID, childObjectID, direction){\n  let sourceObject = document.getLayerWithID(sourceObjectID);\n  let childObject = document.getLayerWithID(childObjectID);\n\n  if(Settings.settingForKey(\"arrowSpacing\") && Settings.settingForKey(\"arrowSpacing\") != 0){\n    let currentSpacing = Settings.settingForKey(\"arrowSpacing\");\n    \n    if(direction == \"Right\"){\n      childObject.frame.x = sourceObject.frame.x + sourceObject.frame.width + currentSpacing;\n    }\n  \n    if(direction == \"Down\"){\n      childObject.frame.y = sourceObject.frame.y + sourceObject.frame.height + currentSpacing;\n    }\n  \n    if(direction == \"Left\"){\n      childObject.frame.x = sourceObject.frame.x - childObject.frame.width - currentSpacing;\n    }\n  \n    if(direction == \"Up\"){\n      childObject.frame.y = sourceObject.frame.y - childObject.frame.height - currentSpacing;\n    }\n  }\n}\n\nfunction autoAlignLayer(sourceObjectID, childObjectID, direction){\n  let sourceObject = document.getLayerWithID(sourceObjectID);\n  let childObject = document.getLayerWithID(childObjectID);\n  let sourceMidY, childMidY, sourceMidX, childMidX, diff;\n\n  if(Settings.settingForKey(\"autoAlign\")){\n    if(Settings.settingForKey(\"autoAlign\") == true){\n      // If user turned on Auto-Align settings\n      \n      if(direction == \"Right\" || direction == \"Left\"){\n        sourceMidY = sourceObject.frame.y + sourceObject.frame.height/2;\n        childMidY = childObject.frame.y + childObject.frame.height/2;\n        diff = sourceMidY - childMidY;\n        if(diff > -6 && diff < 6){childObject.frame.y = childObject.frame.y + diff;}\n      }\n    \n      if(direction == \"Down\" || direction == \"Up\"){\n        sourceMidX = sourceObject.frame.x + sourceObject.frame.width/2;\n        childMidX = childObject.frame.x + childObject.frame.width/2;\n        diff = sourceMidX - childMidX;\n        if(diff > -6 && diff < 6){childObject.frame.x = childObject.frame.x + diff;}\n      }\n    }\n  }\n}","import sketch from 'sketch';\nimport { styleLine } from \"./utilities/styling.js\";\nimport { addCondition, updateCondition } from \"./utilities/conditions.js\";\nimport { checkForGroup, addToArrowsGroup } from \"./utilities/groups.js\";\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n\n// Main Function\n\nexport function drawConnection(firstObjectID, secondObjectID, style, type, localDirection, conditionID, isCondition){ // Refactored\n  // Process of creating new connection  \n  let firstObject = document.getLayerWithID(firstObjectID);\n  let secondObject = document.getLayerWithID(secondObjectID);\n  let connectionPos = getConnectionPos(firstObject, secondObject, localDirection);\n  let connection = {\n    line: [], \n    conditionID: [],\n    type: [],\n    style: []\n  }\n\n  // Type  \n  connection.type = type == null ? Settings.settingForKey(\"arrowType\") : type;\n  if(connection.type == \"Angled\" || connection.type == null){ connection.line = drawAngledLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.middlePosX, connectionPos.middlePosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n  if(connection.type == \"Straight\"){ connection.line = drawStraightLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n  if(connection.type == \"Curved\"){ connection.line = drawCurvedLine(connectionPos.firstLayerPosX, connectionPos.firstLayerPosY, connectionPos.secondLayerPosX, connectionPos.secondLayerPosY, localDirection);}\n\n\n  // Condition\n  if(isCondition == true){\n    if(document.getLayerWithID(conditionID)){\n      log(\"let's update\")\n      connection.conditionID = updateCondition(conditionID, connectionPos.middlePosX, connectionPos.middlePosY);\n    } else {\n      log(\"let's NOT update\")\n      connection.conditionID = addCondition(\"#con\", connectionPos.middlePosX, connectionPos.middlePosY);\n    }\n  } else {\n    connection.conditionID = null;\n  }\n \n  // Style\n  connection.style = styleLine(connection.line, style);\n\n  // Add to group\n  addToArrowsGroup(connection.line);\n  \n  return connection\n}\n\n// Positions\n\nfunction getConnectionPos(firstObject, secondObject, direction){ // Refactored\n\n    let firstObjectAbsPos = firstObject.frame.changeBasis({from: firstObject.parent, to: currentParentGroup});\n    let secondObjectAbsPos = secondObject.frame.changeBasis({from: secondObject.parent, to: currentParentGroup});\n    let currentGroup = checkForGroup(\"Arrows\");\n    let diffX, diffY;\n  \n    if(currentGroup){\n      diffX = currentGroup.frame().x();\n      diffY = currentGroup.frame().y();\n    } else {\n      diffX = 0;\n      diffY = 0;\n    }\n  \n    let connectionPos = {\n      firstLayerPosX: null,\n      firstLayerPosY: null, \n      secondLayerPosX: null, \n      secondLayerPosY: null, \n      middlePosX: null, \n      middlePosY: null\n    }\n  \n    // Getting all the positions\n    if(direction == \"Up\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width/2-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width/2-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Right\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y+firstObjectAbsPos.height/2-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height/2-diffY;\n      \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Down\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x+firstObjectAbsPos.width/2-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y+firstObjectAbsPos.height-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width/2-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n  \n    if(direction == \"Left\"){\n      // First Layer Position Start Point Position\n      connectionPos.firstLayerPosX = firstObjectAbsPos.x-diffX;\n      connectionPos.firstLayerPosY = firstObjectAbsPos.y+firstObjectAbsPos.height/2-diffY;\n  \n      // Second Layer Position End Point Position\n      connectionPos.secondLayerPosX = secondObjectAbsPos.x+secondObjectAbsPos.width-diffX;\n      connectionPos.secondLayerPosY = secondObjectAbsPos.y+secondObjectAbsPos.height/2-diffY;\n  \n      // Middle Points\n      connectionPos.middlePosX = (connectionPos.firstLayerPosX + connectionPos.secondLayerPosX)/2;\n      connectionPos.middlePosY = (connectionPos.firstLayerPosY + connectionPos.secondLayerPosY)/2;\n    }\n\n    return connectionPos\n}\n\n// Drawing Types\n\nfunction drawAngledLine(firstLayerPosX, firstLayerPosY, middlePosX, middlePosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n  \n    if(direction == \"Up\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(firstLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Right\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, secondLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Down\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(firstLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, middlePosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    if(direction == \"Left\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, firstLayerPosY));\n      path.lineToPoint(NSMakePoint(middlePosX, secondLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX, secondLayerPosY));\n    }\n  \n    let line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n    let points = line.layers().firstObject().points();\n    points[1].cornerRadius = 20;\n    points[2].cornerRadius = 20;\n    line.setName(\"Angled Arrow\");\n  \n    return line;\n}\n\nfunction drawStraightLine(firstLayerPosX, firstLayerPosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n    \n    if(direction == \"Up\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Right\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Down\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    if(direction == \"Left\"){\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n    }\n  \n    let line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n    line.setName(\"Straight Arrow\");\n  \n    return line;\n}\n\nfunction drawCurvedLine(firstLayerPosX, firstLayerPosY, secondLayerPosX, secondLayerPosY, direction){ // Refactored\n    let path = NSBezierPath.bezierPath();\n    let line;\n  \n    if(direction == \"Up\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosX<secondLayerPosX){\n        points[0].curveFrom = {x: 0, y: 0.5};\n        points[0].curveTo = {x: -0.5, y: 1};\n  \n        points[1].curveFrom = {x: 1, y: 1};\n        points[1].curveTo = {x: 1, y: 0.5};\n      } else {\n        points[0].curveFrom = {x: 1, y: 0.5};\n        points[0].curveTo = {x: -0.5, y:1};\n  \n        points[1].curveFrom = {x: 1, y: 1};\n        points[1].curveTo = {x: 0, y: 0.5};\n      }\n    }\n  \n    if(direction == \"Right\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosY<secondLayerPosY){\n        points[0].curveFrom = {x: 0.5, y: 0};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 1};\n      } else {\n        points[0].curveFrom = {x: 0.5, y: 1};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 0};\n      }\n    }\n  \n    if(direction == \"Down\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosX<secondLayerPosX){\n        points[0].curveFrom = {x: 0, y: 0.5};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 1,y: 0.5};\n      } else {\n        points[0].curveFrom = {x: 1, y: 0.5};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0,y: 0.5};\n      }\n    }\n  \n    if(direction == \"Left\"){\n      // Connecting points\n      path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY));\n      path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY));\n  \n      // Painting the line\n      line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path));\n      let points = line.layers().firstObject().points();\n  \n      points[0].curveMode = 4;\n      points[1].curveMode = 4;\n      points[0].hasCurveFrom = true;\n      points[1].hasCurveTo = true;\n  \n      if(firstLayerPosY<secondLayerPosY){\n        points[0].curveFrom = {x: 0.5, y: 0};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 1};\n      } else {\n        points[0].curveFrom = {x: 0.5, y: 1};\n        points[0].curveTo = {x: -0.5,y:1};\n  \n        points[1].curveFrom = {x: 1,y: 1};\n        points[1].curveTo = {x: 0.5,y: 0};\n      }\n    }\n  \n    // Providing Settings for the arrow\n    line.setName(\"Curved Arrow\");\n  \n    return line;\n}","//\n//  Variables\n//\n\nimport sketch from 'sketch';\nimport { createArrow } from \"./createArrow.js\";\nimport { updateArrow } from \"./updateArrow.js\";\nimport { getSourceObjectFromSelection } from \"./utilities/getSourceObject.js\"\nimport { getConnectionsData, deleteConnectionFromData } from \"./utilities/data.js\"\nimport { deleteLine } from \"./utilities/lines.js\"\nimport { deleteCondition } from \"./utilities/conditions.js\";\n\nlet UI = require('sketch/ui') ;\nvar Settings = require('sketch/settings');\n\nconst pluginKey = \"flowArrows\";\nlet document;\n\nlet docData, pluginData, currentParentGroup, connectionsData;\nif(context.document){\n  document = sketch.fromNative(context.document);\n  docData = context.document.documentData();\n  pluginData = context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowConnections\", docData, pluginKey);\n  currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n  connectionsData = getConnectionsData();\n} else {\n  // document = sketch.fromNative(context.actionContext.document);\n}\n\n  \n//\n//  Plugin Incoming Commands - Create \n//\n\nexport function createAutoArrow(context){create(context, \"Auto\", false);}\nexport function createRightArrow(context){create(context, \"Right\", false);}\nexport function createDownArrow(context){create(context, \"Down\", false);}\nexport function createLeftArrow(context){create(context, \"Left\", false);}\nexport function createUpArrow(context){create(context, \"Up\", false);}\n\nexport function createRightArrowWithCondition(context){create(context, \"Right\", true);}\nexport function createDownArrowWithCondition(context){create(context, \"Down\", true);}\nexport function createLeftArrowWithCondition(context){create(context, \"Left\", true);}\nexport function createUpArrowWithCondition(context){create(context, \"Up\", true);}\n\nexport function autoUpdateSelectedArrows() {  \n  let a = true\n}\n\n\nfunction create(context, direction, isCondition){\n  let selection = context.selection;\n\n  if(selection.count() > 1 && selection[0].class() != \"MSArtboardGroup\"){\n    let sourceObjectID = getSourceObjectFromSelection(selection, direction);\n    let connectionIndex = []\n    for(let g = 0; g < selection.count(); g++) {\n      if(selection[g].objectID() != sourceObjectID){\n\n        let firstObjectID = String(sourceObjectID);\n        let secondObjectID = String(selection[g].objectID());\n        let create = true\n        let index\n\n        if(connectionsData.length > 0){\n          for (let y = 0; y < connectionsData.length; y++) {\n            if ((firstObjectID == connectionsData[y].firstObject || firstObjectID == connectionsData[y].secondObject) && (secondObjectID == connectionsData[y].firstObject || secondObjectID == connectionsData[y].secondObject)) {\n              // We have this connection and need to update\n              create = false;\n              index = y;\n              connectionIndex.push(y);\n            }\n          }\n        } \n  \n        if(create){\n          // Create\n          let connection = createArrow(firstObjectID, secondObjectID, null, null, direction, null, isCondition);\n          connectionsData.push(connection);\n          sketch.UI.message(\"New connection is created 🚀\");\n        } else {\n          // Update\n          deleteLine(connectionsData[index].line);\n          if (!isCondition) { \n            deleteCondition(connectionsData[index].condition) \n          }\n\n          let connection = createArrow(firstObjectID, secondObjectID, null, null, direction, connectionsData[index].condition, isCondition);\n          connectionsData.push(connection);\n          sketch.UI.message(\"Current connection is updated 🤘\");\n        }\n      }\n    }\n    if(connectionIndex.length > 0){\n      // Update data if there was changes\n      connectionsData = deleteConnectionFromData(connectionIndex, connectionsData);\n    }\n    context.command.setValue_forKey_onLayer_forPluginIdentifier(connectionsData, \"arrowConnections\", docData, pluginKey);\n  } else {\n    // When user didn't select anything\n    sketch.UI.message(\"Please select more than two layers. Artboards are coming soon 🥳\");\n  }\n}\n\n  \n//\n//  Plugin Incoming Commands - Update and Delete\n//\n\nexport function updateSelectedArrows(context) {update(context, 1, true);}\nexport function updateArtboardArrows(context) {update(context, 2, true);}\nexport function updateAllArrows(context) {update(context, 3, true);}\nexport function deleteSelectedArrows(context) {update(context, 1, false);}\nexport function deleteArtboardArrows(context) {update(context, 2, false);}\nexport function deleteAllArrows(context) {update(context, 3, false);}\n\nexport function update(context, level, isUpdate) {\n  // 1 - selection level\n  // 2 - artboard level\n  // 3 - document level\n  let newConnectionsData = [];\n  let selection = context.selection;\n  let firstObjectArtboard;\n  let secondObjectArtboard;\n\n\n  if (connectionsData.length > 0) {\n      for (let i = 0; i < connectionsData.length; i++) {\n          \n          if (level == 3) {\n              if(isUpdate){\n                  updateArrow(connectionsData[i].firstObject, connectionsData[i].secondObject, connectionsData[i].style, connectionsData[i].type, connectionsData[i].direction, connectionsData[i].line, connectionsData[i].condition, i);\n                  sketch.UI.message(\"All arrows are updated\");\n              } else {\n                  newConnectionsData = null\n                  sketch.UI.message(\"All arrows are deleted\");\n              }\n          }\n          if (level == 2) {\n              firstObjectArtboard = document.getLayerWithID(connectionsData[i].firstObject);\n              firstObjectArtboard = firstObjectArtboard.sketchObject.parentArtboard().objectID();\n              secondObjectArtboard = document.getLayerWithID(connectionsData[i].secondObject);\n              secondObjectArtboard = secondObjectArtboard.sketchObject.parentArtboard().objectID();\n\n              if (selection.count() == 1 && selection[0].class() == \"MSArtboardGroup\") {\n\n                  if (firstObjectArtboard == selection[0].objectID()) {\n                      if (secondObjectArtboard == selection[0].objectID()) {\n                          updateArrow(connectionsData[i].firstObject, connectionsData[i].secondObject, connectionsData[i].style, connectionsData[i].type, connectionsData[i].direction, connectionsData[i].line, connectionsData[i].condition, i);\n                      } else {\n                          newConnectionsData.push(connectionsData[i]);\n                      }\n                  } else {\n                      newConnectionsData.push(connectionsData[i]);\n                  }\n              }\n          }\n          sketch.UI.message(\"All arrows are updated 🚀\");\n          \n         \n      }\n      let connection = createArrow(sourceObjectID, selection[g].objectID(), null, null, direction, null, isCondition);\n      connectionsData.push(connection);\n      context.command.setValue_forKey_onLayer_forPluginIdentifier(connectionsData, \"arrowConnections\", docData, pluginKey);\n  } else {\n      sketch.UI.message(\"There is no arrows\");\n  }\n}\n\n// const track = require(\"sketch-module-google-analytics\")\n// track(\"UA-138226597-1\", \"event\", {\n//   ec: \"command\", \n//   ea: \"create\", \n//   ev: \"my-command\"\n// });\n\n\n\n\n\n","import sketch from 'sketch';\nimport { getConnectionsData, deleteConnectionFromData} from \"./utilities/data.js\"\nimport { deleteLine } from \"./utilities/lines.js\"\n\nlet UI = require('sketch/ui') ;\nvar Settings = require('sketch/settings');\nconst pluginKey = \"flowArrows\";\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\nlet pluginData = context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowConnections\", docData, pluginKey);\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage(); // TODO: Might be a problem for multiple artboards\nlet connectionsData = getConnectionsData();\n\n\n\nexport function updateArrow(firstObjectID, secondObjectID, style, type, direction, lineID, conditionID, isCondition, connectionIndex) { // Refactored\n  // Need to check if we have the layers with such IDs\n  // let firstObject = document.getLayerWithID(firstObjectID);\n  // let secondObject = document.getLayerWithID(secondObjectID);\n  // let conditionObject = document.getLayerWithID(conditionID);\n  // let result = false;\n  \n  // Need to delete data first, because we will have a new line\n  // deleteLine(lineID);\n  // if(conditionID && !isCondition){\n  //   if(conditionObject){conditionObject.remove();}\n  // }\n  \n  connectionsData = deleteConnectionFromData(connectionIndex);\n\n  // if(firstObject && secondObject){\n  //   // If we have all the objects, we can recreate the line\n  //   result = true;\n  // }\n\n  // return result;\n}","import sketch from 'sketch';\nimport { addToConditionGroup, checkForGroup } from \"./groups.js\";\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\nexport function addCondition(keyword, x, y) {\n  let libraries = sketch.getLibraries();\n  let libraryObject, symbolReferences, symbol;\n\n  for (let g = 0; g < libraries.length; g++) {\n    symbolReferences = libraries[g].getImportableSymbolReferencesForDocument(\n      document\n    );\n    for (let i = 0; i < symbolReferences.length; i++) {\n      if (symbolReferences[i].name.includes(keyword)) {\n        libraryObject = symbolReferences[i];\n      }\n    }\n  }\n\n  if (libraryObject == null) {\n    symbol = null;\n    UI.alert(\n      \"Condition symbol is not found\",\n      'If you would like to add arrows with specific conditions, you need to specify them in your libraries. You can download the library that works well with the plugin by going into Plugins -> Connection Arrows -> Get Free Library. Conditions are taken from the library based on their names. Make sure to name symbol as \"#condition\" so it will be added here'\n    );\n  } else {\n    let symbolMaster = libraryObject.import();\n    symbol = symbolMaster.createNewInstance();\n    symbol = addToConditionGroup(symbol, x, y);\n  }\n  return symbol;\n}\n\nexport function updateCondition(conditionID, x, y) {\n  let condition = document.getLayerWithID(conditionID);\n  let conGroup = checkForGroup(\"Conditions\");\n  let arGroup = checkForGroup(\"Arrows\");\n  let arGroupX = arGroup != null ? arGroup.frame().x() : 0;\n  let arGroupY = arGroup != null ? arGroup.frame().y() : 0;\n\n  if (conGroup) {\n    condition.frame.x =\n      x - condition.frame.width / 2 - (conGroup.frame().x() - arGroupX);\n    condition.frame.y =\n      y - condition.frame.height / 2 - (conGroup.frame().y() - arGroupY);\n    conGroup.fixGeometryWithOptions(1);\n  } else {\n    condition.frame.x = x - condition.frame.width / 2;\n    condition.frame.y = y - condition.frame.height / 2;\n  }\n  return condition.id;\n}\n\nexport function deleteCondition(conditionID) {\n    let conditionObject = document.getLayerWithID(conditionID);\n    let selectedGroup;\n    if(conditionObject){\n      selectedGroup = conditionObject.parent;\n      conditionObject.remove();\n      if(selectedGroup.layers.length == 0){\n        selectedGroup.remove();\n      }\n    }\n\n  }\n  \n","import sketch from 'sketch';\n\nlet UI = require('sketch/ui') ;\nvar Settings = require('sketch/settings');\n\nconst pluginKey = \"flowArrows\";\nlet document;\n\nlet docData, pluginData, currentParentGroup, connectionsData;\n\ndocument = sketch.fromNative(context.document);\ndocData = context.document.documentData();\npluginData = context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowConnections\", docData, pluginKey);\ncurrentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage(); // TODO: Might be a problem for multiple artboards\n\nexport function getConnectionsData() {\n  let dataArray = [];\n\n  if (pluginData) {\n    for (let i = 0; i < pluginData.length; i++) {\n      dataArray.push(pluginData[i]);\n    }\n  }\n  return dataArray;\n}\n\nexport function deleteConnectionFromData(connectionIndexArray, data){\n  if(data){\n    for (let i = connectionIndexArray.length -1; i >= 0; i--) {\n      data.splice(connectionIndexArray[i],1);\n    }\n  }\n  return data;\n}\n","import sketch from 'sketch';\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n\nexport function getSourceObjectFromSelection(selection, direction){\n  let sourceObjectID = selection.firstObject().objectID();\n  \n  if(direction != \"Auto\"){\n    for(let g = 0; g < selection.count(); g++) {\n      sourceObjectID = defineSourceObject(sourceObjectID, selection[g].objectID(), direction);\n    }\n  }\n  return sourceObjectID;\n}\n\nfunction defineSourceObject(firstObjectID, secondObjectID, direction){\n  \n  let firstObject = document.getLayerWithID(firstObjectID);\n  let secondObject = document.getLayerWithID(secondObjectID);\n  let firstObjectAbsPos = firstObject.frame.changeBasis({from: firstObject.parent, to: currentParentGroup});\n  let secondObjectAbsPos = secondObject.frame.changeBasis({from: secondObject.parent, to: currentParentGroup});\n  let sourceObjectID;\n\n  if(direction == \"Right\"){\n    if(firstObjectAbsPos.x <= secondObjectAbsPos.x){ // We need to get the doc position\n      sourceObjectID = firstObject.id;\n    } else {\n      sourceObjectID = secondObject.id;\n    }\n  }\n\n  if(direction == \"Down\"){\n    if(firstObject.y <= secondObjectAbsPos.y){\n      sourceObjectID = firstObject.id;\n    } else {\n      sourceObjectID = secondObject.id;\n    }\n  }\n\n  if(direction == \"Left\"){\n    if(firstObjectAbsPos.x <= secondObjectAbsPos.x){\n      sourceObjectID = secondObject.id;\n    } else {\n      sourceObjectID = firstObject.id;\n    }\n  }\n\n  if(direction == \"Up\"){\n    if(firstObjectAbsPos.y <= secondObjectAbsPos.y){\n      sourceObjectID = secondObject.id;\n    } else {\n      sourceObjectID = firstObject.id;\n    }\n  }\n\n  return sourceObjectID;\n}","import sketch from 'sketch';\nlet Settings = require('sketch/settings');\nlet UI = require('sketch/ui') ;\n\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\nlet currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage();\n\n\nexport function checkForGroup(groupName) { // refactored\n    let currentGroup = null;\n  \n    // Checking all the groups that we have\n    for(let i = 0; i < currentParentGroup.layers().count(); i++){\n      if(currentParentGroup.layers()[i].name() == groupName) {\n        currentGroup = currentParentGroup.layers()[i];\n      } \n    }\n  \n    return currentGroup;\n}\n\nexport function addToArrowsGroup(line){\n    let currentGroup = checkForGroup(\"Arrows\");\n    if(currentGroup){\n      currentGroup.addLayers([line]);\n      currentGroup.fixGeometryWithOptions(1);\n    } else {\n      let Group = require('sketch/dom').Group;\n      let group = new Group({\n        parent: currentParentGroup,\n        name: 'Arrows',\n        locked: true,\n        layers: [line]\n      });\n      group.moveToBack();\n      group.adjustToFit();\n    }\n}\n\nexport function addToConditionGroup(condition, x, y) {\n    let conGroup = checkForGroup(\"Conditions\");\n    let arGroup = checkForGroup(\"Arrows\");\n    \n    let arGroupX = arGroup != null ? arGroup.frame().x() : 0;\n    let arGroupY = arGroup != null ? arGroup.frame().y() : 0;\n\n    if (conGroup) {\n      condition.frame.x =\n        x - condition.frame.width / 2 - (conGroup.frame().x() - arGroupX);\n      condition.frame.y =\n        y - condition.frame.height / 2 - (conGroup.frame().y() - arGroupY);\n      condition.parent = conGroup;\n      conGroup.fixGeometryWithOptions(1);\n    } else {\n      condition.frame.x = x - condition.frame.width / 2 + arGroupX;\n      condition.frame.y = y - condition.frame.height / 2 + arGroupY;\n      let Group = require(\"sketch/dom\").Group;\n      let group = new Group({\n        parent: currentParentGroup,\n        name: \"Conditions\",\n        layers: [condition]\n      });\n      group.moveToBack();\n      group.adjustToFit();\n    }\n    return condition.id;\n  }","import sketch from 'sketch';\nlet document = sketch.fromNative(context.document);\n\nexport function deleteLine(lineID){\n    let lineObject = document.getLayerWithID(lineID);\n    let selectedGroup;\n    if(lineObject){\n      selectedGroup = lineObject.parent;\n      lineObject.remove();\n      if(selectedGroup.layers.length == 0){\n        selectedGroup.remove();\n      }\n    }\n}\n","import sketch from 'sketch';\nconst pluginKey = \"flowArrows\";\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\n\nexport function styleLine(line, style){ // Refactored\n    let localStyle;\n    \n    if(style != null){ \n      // For updates\n      if(getLayerStyles(style) != null && style != \"Default Style\"){\n        // If style is specified\n        localStyle = style;\n        let ownStyle = getLayerStyles(style);\n        line.sharedStyle = ownStyle[0];\n      } else {\n        // if there is no specific style\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      }\n    } else {\n      // For creating new\n      if(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != null && context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != \"Default Style\"){\n        // we have settins almost all the time and it's not default\n        localStyle = getLayerStyles(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey));\n        line.sharedStyle = localStyle[0];\n        localStyle = localStyle[0].name();\n      } else {\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      } \n    }\n  \n    return localStyle;\n}\n\nexport function getLayerStyles(name) { // Refactored\n    let allStyles = docData.allLayerStyles();\n    let keyword = \"$arrow\";\n    let styles = [];\n  \n    for(let i = 0; i < allStyles.count(); i++){\n      if(name == null) {\n        if(allStyles[i].name().includes(keyword)){styles.push(allStyles[i]);}\n      } else {\n        if(allStyles[i].name() == name){styles.push(allStyles[i]);}\n      }\n    }\n      return styles;\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}