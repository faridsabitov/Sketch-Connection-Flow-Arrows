var that=this;function __skpm_run(e,t){that.context=t;var r=function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/script.js")}({"./src/script.js":
/*!***********************!*\
  !*** ./src/script.js ***!
  \***********************/
/*! exports provided: default, updateSelectedArrows, updateArtboardArrows, updateAllArrows, deleteAllArrows, deleteArtboardArrows, deleteSelectedArrows, settings, onLayersMoved, panel */function(e,r,a){"use strict";a.r(r),a.d(r,"updateSelectedArrows",function(){return y}),a.d(r,"updateArtboardArrows",function(){return S}),a.d(r,"updateAllArrows",function(){return v}),a.d(r,"deleteAllArrows",function(){return g}),a.d(r,"deleteArtboardArrows",function(){return I}),a.d(r,"deleteSelectedArrows",function(){return p}),a.d(r,"settings",function(){return w}),a.d(r,"onLayersMoved",function(){return T}),a.d(r,"panel",function(){return b});var i,o=a(/*! sketch */"sketch"),n=a.n(o),l=a(/*! sketch/ui */"sketch/ui"),s=(a(/*! sketch/dom */"sketch/dom").SharedStyle,"flowArrows"),d=n.a.fromNative(t.document),m=t.document.documentData(),f=t.command.valueForKey_onLayer_forPluginIdentifier("arrowConnections",m,s),u=m.currentPage().currentArtboard()||m.currentPage(),c=A(),h=a(/*! sketch/settings */"sketch/settings");function y(e){var t=e.selection;if(t.count()>1){for(var r=F(t),a=c,o=0;o<t.count();o++)if(t[o].objectID()!=r){var l=k(r,t[o].objectID(),a);null!=l&&(P(a[l].firstObject,a[l].secondObject,a[l].style,a[l].type,i,a[l].line,l),n.a.UI.message("Current connection is updated ðŸš€"))}e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s)}else n.a.UI.message("Please select more than two layers")}function S(e){var t,r,a=e.selection,i=A();if(i.length>0){for(var o=i.length,l=0;l<o;l++)t=(t=d.getLayerWithID(i[l].firstObject)).sketchObject.parentArtboard().objectID(),r=(r=d.getLayerWithID(i[l].secondObject)).sketchObject.parentArtboard().objectID(),1==a.count()&&"MSArtboardGroup"==a[0].class()&&(t==a[0].objectID()&&r==a[0].objectID()?P(i[l].firstObject,i[l].secondObject,i[l].style,i[l].type,i[l].direction,i[l].line,l):c.push(i[l]));e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s),n.a.UI.message("All arrows are updated ðŸš€")}else n.a.UI.message("There is nothing to update")}function v(e){e.selection;var t=A();if(t.length>0){for(var r=t.length,a=0;a<r;a++)P(t[a].firstObject,t[a].secondObject,t[a].style,t[a].type,t[a].direction,t[a].line,a);e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s),n.a.UI.message("All arrows are updated ðŸš€")}else n.a.UI.message("There is nothing to update")}function g(e){if(c.length>0){for(var t=0;t<c.length;t++)j(c[t].line);e.command.setValue_forKey_onLayer_forPluginIdentifier(null,"arrowConnections",m,s),n.a.UI.message("All arrows are deleted")}else n.a.UI.message("There is nothing to delete")}function I(e){var t,r,a=e.selection;if(1==a.count()&&"MSArtboardGroup"==a[0].class()){var i=A();if(i.length>0){for(var o=i.length,l=0;l<o;l++)t=d.getLayerWithID(i[l].firstObject),r=d.getLayerWithID(i[l].secondObject),t.sketchObject.parentArtboard().objectID()==a[0].objectID()&&r.sketchObject.parentArtboard().objectID()==a[0].objectID()&&(j(i[l].line),c=_(l));e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s),n.a.UI.message("All arrows from selected artboard are deleted")}else n.a.UI.message("There is nothing to delete")}else n.a.UI.message("Please select one artboard")}function p(e){var t,r,a=e.selection;if(2==a.count()){for(var i=0;i<a.count();i++)if(a[i].objectID()!=a[0].objectID()){var o=A(),l=k(a[0].objectID(),a[i].objectID(),o);if(null!=l){j(o[l].line),c=_(l);for(var f=o.length,u=0;u<f;u++)t=d.getLayerWithID(o[u].firstObject),r=d.getLayerWithID(o[u].secondObject),t.sketchObject.parentArtboard().objectID()==a[0].objectID()&&r.sketchObject.parentArtboard().objectID()==a[0].objectID()&&(j(o[u].line),c=_(u));e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s),n.a.UI.message("All arrows from selected layers are deleted âœŒï¸")}}}else n.a.UI.message("Select two layers, please ðŸ§")}function w(e){var t=COSAlertWindow.new();t=function(e,t,r){return e.setMessageText("Arrow Plugin Settings"),e.addButtonWithTitle("Update Settings"),e.addButtonWithTitle("Cancel"),e}(t);var r=NSView.alloc().initWithFrame(NSMakeRect(0,0,300,500));t.addAccessoryView(r);var a=L("Arrow Direction",!0,-1,483,330,20);r.addSubview(a);var i=NSPopUpButton.alloc().initWithFrame(NSMakeRect(-2,460,300,20));!function(e){var t="Auto";h.settingForKey("arrowDirection")?("Auto"==(t=h.settingForKey("arrowDirection"))&&(e.addItemWithTitle("Auto"),e.lastItem().setState(1),e.addItemWithTitle("Right"),e.lastItem().setState(0),e.addItemWithTitle("Down"),e.lastItem().setState(0),e.addItemWithTitle("Left"),e.lastItem().setState(0),e.addItemWithTitle("Up"),e.lastItem().setState(0)),"Right"==t&&(e.addItemWithTitle("Right"),e.lastItem().setState(1),e.addItemWithTitle("Down"),e.lastItem().setState(0),e.addItemWithTitle("Left"),e.lastItem().setState(0),e.addItemWithTitle("Up"),e.lastItem().setState(0),e.addItemWithTitle("Auto"),e.lastItem().setState(0)),"Down"==t&&(e.addItemWithTitle("Down"),e.lastItem().setState(1),e.addItemWithTitle("Left"),e.lastItem().setState(0),e.addItemWithTitle("Up"),e.lastItem().setState(0),e.addItemWithTitle("Auto"),e.lastItem().setState(0),e.addItemWithTitle("Right"),e.lastItem().setState(0)),"Left"==t&&(e.addItemWithTitle("Left"),e.lastItem().setState(1),e.addItemWithTitle("Up"),e.lastItem().setState(0),e.addItemWithTitle("Auto"),e.lastItem().setState(0),e.addItemWithTitle("Right"),e.lastItem().setState(0),e.addItemWithTitle("Down"),e.lastItem().setState(0)),"Up"==t&&(e.addItemWithTitle("Up"),e.lastItem().setState(1),e.addItemWithTitle("Auto"),e.lastItem().setState(0),e.addItemWithTitle("Right"),e.lastItem().setState(0),e.addItemWithTitle("Down"),e.lastItem().setState(0),e.addItemWithTitle("Left"),e.lastItem().setState(0))):(e.addItemWithTitle("Auto"),e.addItemWithTitle("Right"),e.addItemWithTitle("Down"),e.addItemWithTitle("Left"),e.addItemWithTitle("Up"))}(i),r.addSubview(i);var o=L("Auto mode will draw arrow based on location of the second object",!1,-1,416,300,40);r.addSubview(o);var n=L("Arrow Spacing",!0,-1,390,330,20);r.addSubview(n);var d=NSPopUpButton.alloc().initWithFrame(NSMakeRect(-2,367,300,20));!function(e){var t="Not selected";h.settingForKey("arrowSpacing")?("Not selected"==(t=h.settingForKey("arrowSpacing"))&&(e.addItemWithTitle("Not selected"),e.lastItem().setState(1),e.addItemWithTitle("30px"),e.lastItem().setState(0),e.addItemWithTitle("70px"),e.lastItem().setState(0)),"30px"==t&&(e.addItemWithTitle("30px"),e.lastItem().setState(1),e.addItemWithTitle("70px"),e.lastItem().setState(0),e.addItemWithTitle("Not selected"),e.lastItem().setState(0)),"70px"==t&&(e.addItemWithTitle("70px"),e.lastItem().setState(1),e.addItemWithTitle("Not selected"),e.lastItem().setState(0),e.addItemWithTitle("30px"),e.lastItem().setState(0))):(e.addItemWithTitle("Not Selected"),e.addItemWithTitle("30px"),e.addItemWithTitle("70px"))}(d),r.addSubview(d);var f=L("If you will select spacing, the second layer position will be moved closer",!1,-1,323,300,40);r.addSubview(f);var u=L("Arrow Style",!0,-1,275,280,40);r.addSubview(u);var c=NSPopUpButton.alloc().initWithFrame(NSMakeRect(-2,275,300,20));M(c),r.addSubview(c);var y=L("Add layer style to your document that will contain $arrow name and you will be able to specify it here ",!1,-1,235,300,40);r.addSubview(y);var S=L("Arrow Type",!0,-1,190,280,40);r.addSubview(S);var v=NSPopUpButton.alloc().initWithFrame(NSMakeRect(-2,190,300,20));!function(e){var t=h.settingForKey("arrowType");t?("Angled"==t&&(e.addItemWithTitle("Angled"),e.lastItem().setState(1),e.addItemWithTitle("Curved"),e.lastItem().setState(0),e.addItemWithTitle("Straight"),e.lastItem().setState(0)),"Curved"==t&&(e.addItemWithTitle("Curved"),e.lastItem().setState(1),e.addItemWithTitle("Straight"),e.lastItem().setState(0),e.addItemWithTitle("Angled"),e.lastItem().setState(0)),"Straight"==t&&(e.addItemWithTitle("Straight"),e.lastItem().setState(1),e.addItemWithTitle("Angled"),e.lastItem().setState(0),e.addItemWithTitle("Curved"),e.lastItem().setState(0))):(e.addItemWithTitle("Angled"),e.addItemWithTitle("Curved"),e.addItemWithTitle("Straight"))}(v),r.addSubview(v);var g=L("Select one of the arrow types. Angled is used by default",!1,-1,150,300,40);r.addSubview(g);var I=L("Other Settings",!0,-1,100,280,40);r.addSubview(I);var p=function(e,t,r,a,i,o){var n=NSButton.alloc().initWithFrame(NSMakeRect(r,a,i,o));if(n.setButtonType(NSSwitchButton),n.setBezelStyle(0),n.setTitle(e),h.settingForKey("autoAlign")){var l=h.settingForKey("autoAlign");n.setState(l)}else n.setState(t);return n}("Second layer auto-align",!1,-1,90,260,40);r.addSubview(p);var w=L("Align the second layer for 5px misalignment with the first one",!1,-1,60,280,40);r.addSubview(w);var T=L("Made by @faridSabitov with the support of EPAM.com â¤ï¸",!0,-1,10,280,40);r.addSubview(T),t.runModal()==NSAlertFirstButtonReturn&&(h.setSettingForKey("arrowDirection",t.views()[0].subviews()[1].title()),h.setSettingForKey("arrowSpacing",t.views()[0].subviews()[4].title()),e.command.setValue_forKey_onLayer_forPluginIdentifier(t.views()[0].subviews()[7].title(),"arrowStyle",m,s),h.setSettingForKey("arrowType",t.views()[0].subviews()[10].title()),h.setSettingForKey("autoAlign",t.views()[0].subviews()[13].state()),l.message("Settings are updated ðŸš€"))}function T(e){n.a.UI.message("Please select more than two layers");e.actionContext}function b(e){var t;(t=NSPanel.alloc().init()).setStyleMask(NSTitledWindowMask+NSFullSizeContentViewWindowMask),t.setTitleVisibility(NSWindowTitleHidden),t.setTitlebarAppearsTransparent(!0),t.setFrame_display(NSMakeRect(0,0,720,50),!1),t.setMovableByWindowBackground(!0),t.setHasShadow(!0),t.setLevel(NSFloatingWindowLevel),t.center(),t.makeKeyAndOrderFront(nil)}function P(e,t,r,a,i,o,n){var l=d.getLayerWithID(e),s=d.getLayerWithID(t);j(o),c=_(n),l&&s&&x(e,t,r,a,i)}function x(e,r,i,o,n){var l,f,y;l="Auto"==n?function(e,t){var r,a=d.getLayerWithID(e),i=d.getLayerWithID(t),o=a.frame.x+a.frame.width/2,n=a.frame.y+a.frame.height/2,l=i.frame.x+i.frame.width/2,s=i.frame.y+i.frame.height/2,m=o-l,f=n-s,u=Math.abs(m),c=Math.abs(f);r=l>o?s>n?m>f?"Down":"Right":u>c?"Right":"Up":s>n?u>c?"Left":"Down":m>f?"Left":"Up";return r}(e,r):n,y=null==o?h.settingForKey("arrowType"):o,f=O(t.command.valueForKey_onLayer_forPluginIdentifier("arrowStyle",m,s)),null!=i&&(f=null!=O(i)?i:"Default Style"),function(e,t,r){var a=d.getLayerWithID(e),i=d.getLayerWithID(t);if(h.settingForKey("arrowSpacing")){var o=h.settingForKey("arrowSpacing");"Right"==r&&("30px"==o&&(i.frame.x=a.frame.x+a.frame.width+30),"70px"==o&&(i.frame.x=a.frame.x+a.frame.width+70)),"Down"==r&&("30px"==o&&(i.frame.y=a.frame.y+a.frame.height+30),"70px"==o&&(i.frame.y=a.frame.y+a.frame.height+70)),"Left"==r&&("30px"==o&&(i.frame.x=a.frame.x-i.frame.width-30),"70px"==o&&(i.frame.x=a.frame.x-i.frame.width-70)),"Up"==r&&("30px"==o&&(i.frame.y=a.frame.y-i.frame.height-30),"70px"==o&&(i.frame.y=a.frame.y-i.frame.height-70))}}(e,r,l),function(e,t,r){var a,i,o,n,l,s=d.getLayerWithID(e),m=d.getLayerWithID(t);h.settingForKey("autoAlign")&&1==h.settingForKey("autoAlign")&&("Right"!=r&&"Left"!=r||(a=s.frame.y+s.frame.height/2,i=m.frame.y+m.frame.height/2,(l=a-i)>-6&&l<6&&(m.frame.y=m.frame.y+l)),"Down"!=r&&"Up"!=r||(o=s.frame.x+s.frame.width/2,n=m.frame.x+m.frame.width/2,(l=o-n)>-6&&l<6&&(m.frame.x=m.frame.x+l)))}(e,r,l);var S=W(),v=function(e,r,a,i,o,n){var l,f,u,c,h,y,S,v,g,I=d.getLayerWithID(e),p=d.getLayerWithID(r);n?(S=n.frame().x(),v=n.frame().y()):(S=0,v=0);var w=NSBezierPath.bezierPath();if(log(i),"Angled"==i||null==i){"Up"==o&&(l=I.frame.x+I.frame.width/2-S,f=I.frame.y-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y+p.frame.height-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(l,y)),w.lineToPoint(NSMakePoint(u,y)),w.lineToPoint(NSMakePoint(u,c))),"Right"==o&&(l=I.frame.x+I.frame.width-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(h,f)),w.lineToPoint(NSMakePoint(h,c)),w.lineToPoint(NSMakePoint(u,c))),"Down"==o&&(l=I.frame.x+I.frame.width/2-S,f=I.frame.y+I.frame.height-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(l,y)),w.lineToPoint(NSMakePoint(u,y)),w.lineToPoint(NSMakePoint(u,c))),"Left"==o&&(l=I.frame.x-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x+p.frame.width-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(h,f)),w.lineToPoint(NSMakePoint(h,c)),w.lineToPoint(NSMakePoint(u,c)));var T=(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).layers().firstObject().points();T[1].cornerRadius=20,T[2].cornerRadius=20,g.setName("Arrow")}"Straight"==i&&("Up"==o&&(l=I.frame.x+I.frame.width/2-S,f=I.frame.y-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y+p.frame.height-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c))),"Right"==o&&(l=I.frame.x+I.frame.width-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c))),"Down"==o&&(l=I.frame.x+I.frame.width/2-S,f=I.frame.y+I.frame.height-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c))),"Left"==o&&(l=I.frame.x-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x+p.frame.width-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c))),(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).setName("Arrow"));if("Curved"==i){if("Up"==o){l=I.frame.x+I.frame.width/2-S,f=I.frame.y-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y+p.frame.height-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c));var b=(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).layers().firstObject().points();b[0].curveMode=b[1].curveMode=4,b[0].hasCurveFrom=b[1].hasCurveTo=!0,l<u?(b[0].curveFrom={x:0,y:.5},b[0].curveTo={x:-.5,y:1},b[1].curveFrom={x:1,y:1},b[1].curveTo={x:1,y:.5}):(b[0].curveFrom={x:1,y:.5},b[0].curveTo={x:-.5,y:1},b[1].curveFrom={x:1,y:1},b[1].curveTo={x:0,y:.5})}if("Right"==o){l=I.frame.x+I.frame.width-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c));var P=(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).layers().firstObject().points();P[0].curveMode=P[1].curveMode=4,P[0].hasCurveFrom=P[1].hasCurveTo=!0,f<c?(P[0].curveFrom={x:.5,y:0},P[0].curveTo={x:-.5,y:1},P[1].curveFrom={x:1,y:1},P[1].curveTo={x:.5,y:1}):(P[0].curveFrom={x:.5,y:1},P[0].curveTo={x:-.5,y:1},P[1].curveFrom={x:1,y:1},P[1].curveTo={x:.5,y:0})}if("Down"==o){l=I.frame.x+I.frame.width/2-S,f=I.frame.y+I.frame.height-v,u=p.frame.x+p.frame.width/2-S,c=p.frame.y-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c));var x=(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).layers().firstObject().points();x[0].curveMode=x[1].curveMode=4,x[0].hasCurveFrom=x[1].hasCurveTo=!0,l<u?(x[0].curveFrom={x:0,y:.5},x[0].curveTo={x:-.5,y:1},x[1].curveFrom={x:1,y:1},x[1].curveTo={x:1,y:.5}):(x[0].curveFrom={x:1,y:.5},x[0].curveTo={x:-.5,y:1},x[1].curveFrom={x:1,y:1},x[1].curveTo={x:0,y:.5})}if("Left"==o){l=I.frame.x-S,f=I.frame.y+I.frame.height/2-v,u=p.frame.x+p.frame.width-S,c=p.frame.y+p.frame.height/2-v,h=(l+u)/2,y=(f+c)/2,w.moveToPoint(NSMakePoint(l,f)),w.lineToPoint(NSMakePoint(u,c));var W=(g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(w))).layers().firstObject().points();W[0].curveMode=W[1].curveMode=4,W[0].hasCurveFrom=W[1].hasCurveTo=!0,f<c?(W[0].curveFrom={x:.5,y:0},W[0].curveTo={x:-.5,y:1},W[1].curveFrom={x:1,y:1},W[1].curveTo={x:.5,y:1}):(W[0].curveFrom={x:.5,y:1},W[0].curveTo={x:-.5,y:1},W[1].curveFrom={x:1,y:1},W[1].curveTo={x:.5,y:0})}g.setName("Arrows")}if(t.command.valueForKey_onLayer_forPluginIdentifier("arrowStyle",m,s)){var A=O(t.command.valueForKey_onLayer_forPluginIdentifier("arrowStyle",m,s));if(null==A[0]){var k=g.style().addStylePartOfType(1);k.color=MSColor.colorWithRGBADictionary({r:.89,g:.89,b:.89,a:1}),k.thickness=2,g.style().endMarkerType=2}else g.sharedStyle=A[0]}else{var M=g.style().addStylePartOfType(1);M.color=MSColor.colorWithRGBADictionary({r:.89,g:.89,b:.89,a:1}),M.thickness=2,g.style().endMarkerType=2}return g}(e,r,0,y,l,S);!function(e,t){if(t)t.addLayers([e]),t.fixGeometryWithOptions(1);else{var r=a(/*! sketch/dom */"sketch/dom").Group,i=new r({parent:u,name:"Arrows",locked:!0,layers:[e]});i.moveToBack(),(t=W()).fixGeometryWithOptions(1)}}(v,S);var g={firstObject:e,secondObject:r,style:f,type:y,direction:l,line:v.objectID()};c.push(g)}function W(){for(var e=null,t=0;t<u.layers().count();t++)"Arrows"==u.layers()[t].name()&&D(e=u.layers()[t]);return e}function A(){var e=[],r=[];if(f){r=t.command.valueForKey_onLayer_forPluginIdentifier("arrowConnections",m,s);for(var a=0;a<r.length;a++)e.push(r[a])}return e}function k(e,t,r){var a=null;if(e=String(e),t=String(t),f)for(var i=0;i<r.length;i++)e!=r[i].firstObject&&e!=r[i].secondObject||t!=r[i].firstObject&&t!=r[i].secondObject||(a=i);return a}function M(e){var r=t.command.valueForKey_onLayer_forPluginIdentifier("arrowStyle",m,s),a=O(null);if(r)if("Default Style"!=r){e.addItemWithTitle(r),e.addItemWithTitle("Default Style");for(var i=0;i<a.length;i++)a[i].name()!=r&&e.addItemWithTitle(a[i].name())}else{e.addItemWithTitle("Default Style");for(var o=0;o<a.length;o++)e.addItemWithTitle(a[o].name())}else{e.addItemWithTitle("Default Style");for(var n=0;n<a.length;n++)e.addItemWithTitle(a[n].name())}}function _(e){var r=[];if(f)for(var a=t.command.valueForKey_onLayer_forPluginIdentifier("arrowConnections",m,s),i=0;i<a.length;i++)i!=e&&r.push(a[i]);return r}function D(e){for(var t=0;t<e.layers().length;t++);}function j(e){var t,r=d.getLayerWithID(e);r&&(t=r.parent,r.remove(),0==t.layers.length&&t.remove())}function N(e,t,r){var a,i=d.getLayerWithID(e),o=d.getLayerWithID(t);return"Auto"==r&&(a=i.id),"Right"==r&&(a=i.frame.x<=o.frame.x?i.id:o.id),"Down"==r&&(a=i.frame.y<=o.frame.y?i.id:o.id),"Left"==r&&(a=i.frame.x<=o.frame.x?o.id:i.id),"Up"==r&&(a=i.frame.y<=o.frame.y?o.id:i.id),a}function F(e){var t=e.firstObject().objectID();if("Auto"!=i)for(var r=0;r<e.count();r++)t=N(t,e[r].objectID(),i);else t=N(t,e[0].objectID(),i);return t}function L(e,t,r,a,i,o){var n=NSTextField.alloc().initWithFrame(NSMakeRect(r,a,i,o));return n.setStringValue(e),n.setSelectable(!1),n.setDrawsBackground(!1),n.setBezeled(!1),0==t&&(n.textColor=NSColor.disabledControlTextColor()),n}function O(e){var t=m.allLayerStyles(),r=[];if(null==e)for(var a=0;a<t.count();a++)t[a].name().includes("$arrow")&&r.push(t[a]);else for(var i=0;i<t.count();i++)t[i].name()==e&&r.push(t[i]);return r}i=h.settingForKey("arrowDirection")?h.settingForKey("arrowDirection"):"Auto",r.default=function(e){var t=e.selection;if(t.count()>1){for(var r=F(t),a=c,o=0;o<t.count();o++)if(t[o].objectID()!=r){var l=k(r,t[o].objectID(),a);null!=l?(P(a[l].firstObject,a[l].secondObject,null,null,i,a[l].line,l),n.a.UI.message("Current connection is updated ðŸš€")):(x(r,t[o].objectID(),null,null,i),n.a.UI.message("New connection is created ðŸš€"))}e.command.setValue_forKey_onLayer_forPluginIdentifier(c,"arrowConnections",m,s)}else n.a.UI.message("Please select more than two layers")}},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("sketch")},"sketch/dom":
/*!*****************************!*\
  !*** external "sketch/dom" ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/dom")},"sketch/settings":
/*!**********************************!*\
  !*** external "sketch/settings" ***!
  \**********************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/settings")},"sketch/ui":
/*!****************************!*\
  !*** external "sketch/ui" ***!
  \****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/ui")}});"default"===e&&"function"==typeof r?r(t):r[e](t)}that.onRun=__skpm_run.bind(this,"default"),that.updateSelectedArrows=__skpm_run.bind(this,"updateSelectedArrows"),that.updateArtboardArrows=__skpm_run.bind(this,"updateArtboardArrows"),that.updateAllArrows=__skpm_run.bind(this,"updateAllArrows"),that.deleteSelectedArrows=__skpm_run.bind(this,"deleteSelectedArrows"),that.deleteArtboardArrows=__skpm_run.bind(this,"deleteArtboardArrows"),that.deleteAllArrows=__skpm_run.bind(this,"deleteAllArrows"),that.settings=__skpm_run.bind(this,"settings"),that.panel=__skpm_run.bind(this,"panel");