{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/settings.js","webpack://exports/./src/utilities/styling.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["UI","require","Settings","pluginKey","document","sketch","fromNative","context","docData","documentData","settings","alert","COSAlertWindow","new","viewWidth","viewHeight","alertSetup","view","NSView","alloc","initWithFrame","NSMakeRect","addAccessoryView","arrowStyleLabel","alertLabel","addSubview","arrowStylingField","NSPopUpButton","setActiveStyleSetting","arrowStyleInfoLabel","arrowTypeLabel","arrowTypeField","setActiveTypeSetting","arrowTypeInfoLabel","arrowSpacingLabel","arrowSpacingPxLabel","arrowSpacingField","NSTextField","formatter","NSNumberFormatter","init","autorelease","setStringValue","String","settingForKey","setFormatter","arrowSpacingStepper","NSStepper","setMaxValue","setMinValue","setValueWraps","setAutorepeat","setCOSJSTargetFunction","sender","value","integerValue","arrowSpacingInfoLabel","otherSettingsLabel","checkAutoAlign","alertCheckbox","autoAlignInfoLabel","checkAutoDraw","autoDrawInfoLabel","pluginInfoLabel","modalResponse","runModal","NSAlertFirstButtonReturn","command","setValue_forKey_onLayer_forPluginIdentifier","views","subviews","title","setSettingForKey","intValue","state","message","docSettings","valueForKey_onLayer_forPluginIdentifier","styles","getLayerStyles","addItemWithTitle","i","length","name","docTypeSettings","lastItem","setState","setMessageText","addButtonWithTitle","x","y","width","height","infoLabel","setSelectable","setDrawsBackground","setBezeled","textColor","NSColor","disabledControlTextColor","checkbox","NSButton","setButtonType","NSSwitchButton","setBezelStyle","setTitle","currentState","styleLine","line","style","localStyle","ownStyle","sharedStyle","border","addStylePartOfType","color","MSColor","colorWithRGBADictionary","r","g","b","a","thickness","endMarkerType","allStyles","allLayerStyles","keyword","count","includes","push"],"mappings":"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","file":"settings.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/settings.js\");\n","import sketch from \"sketch\";\nimport { getLayerStyles } from \"./utilities/styling.js\";\n\n\nlet UI = require('sketch/ui') ;\nlet Settings = require(\"sketch/settings\");\nconst pluginKey = \"flowArrows\";\nlet document = sketch.fromNative(context.document);\nlet docData = context.document.documentData();\n\nexport function settings(context) {\n  let alert = COSAlertWindow.new();\n  const viewWidth = 300;\n  const viewHeight = 500;\n\n  // Alert window settings\n  alert = alertSetup(alert, viewWidth, viewHeight);\n  let view = NSView.alloc().initWithFrame(\n    NSMakeRect(0, 0, viewWidth, viewHeight)\n  );\n  alert.addAccessoryView(view);\n\n  // Label: Arrow Style\n  let arrowStyleLabel = alertLabel(\n    \"Arrow Style\",\n    true,\n    -1,\n    viewHeight - 40,\n    280,\n    40\n  );\n  view.addSubview(arrowStyleLabel);\n\n  // Select: Arrow Style\n  let arrowStylingField = NSPopUpButton.alloc().initWithFrame(\n    NSMakeRect(-2, viewHeight - 40, 300, 20)\n  );\n  setActiveStyleSetting(arrowStylingField);\n  view.addSubview(arrowStylingField);\n\n  // Label: Arrow Style Info\n  let arrowStyleInfoLabel = alertLabel(\n    \"Add layer style to your document that will contain $arrow name and you will be able to specify it here \",\n    false,\n    -1,\n    viewHeight - 80,\n    300,\n    40\n  );\n  view.addSubview(arrowStyleInfoLabel);\n\n  // Label: Arrow Type\n  let arrowTypeLabel = alertLabel(\n    \"Arrow Type\",\n    true,\n    -1,\n    viewHeight - 130,\n    280,\n    40\n  );\n  view.addSubview(arrowTypeLabel);\n\n  // Select: Arrow Type\n  let arrowTypeField = NSPopUpButton.alloc().initWithFrame(\n    NSMakeRect(-2, viewHeight - 130, 300, 20)\n  );\n  setActiveTypeSetting(arrowTypeField);\n  view.addSubview(arrowTypeField);\n\n  // Label: Arrow Type Info\n  let arrowTypeInfoLabel = alertLabel(\n    \"Select one of the arrow types. Angled is used by default\",\n    false,\n    -1,\n    viewHeight - 170,\n    300,\n    40\n  );\n  view.addSubview(arrowTypeInfoLabel);\n\n  // Label: Arrow Spacing\n  let arrowSpacingLabel = alertLabel(\n    \"Arrow Spacing\",\n    true,\n    -1,\n    viewHeight - 200,\n    330,\n    20\n  );\n  view.addSubview(arrowSpacingLabel);\n\n  // Label: Arrow Spacing PX\n  let arrowSpacingPxLabel = alertLabel(\n    \"px\",\n    true,\n    90,\n    viewHeight - 220,\n    330,\n    20\n  );\n  view.addSubview(arrowSpacingPxLabel);\n\n  // Input: Arrow Spacing\n  let arrowSpacingField = NSTextField.alloc().initWithFrame(\n    NSMakeRect(-2, viewHeight - 220, 80, 20)\n  );\n  var formatter = NSNumberFormatter.alloc()\n    .init()\n    .autorelease();\n  arrowSpacingField.setStringValue(\n    String(Settings.settingForKey(\"arrowSpacing\"))\n  );\n  arrowSpacingField.setFormatter(formatter);\n  view.addSubview(arrowSpacingField);\n\n  // Stepper: Arrow Spacing\n  let arrowSpacingStepper = NSStepper.alloc().initWithFrame(\n    NSMakeRect(70, viewHeight - 220, 20, 20)\n  );\n  arrowSpacingStepper.setMaxValue(1000);\n  arrowSpacingStepper.setMinValue(0);\n  arrowSpacingStepper.setValueWraps(false);\n  arrowSpacingStepper.setAutorepeat(true);\n  arrowSpacingStepper.setCOSJSTargetFunction(function(sender) {\n    var value = 0 + sender.integerValue();\n    arrowSpacingField.setStringValue(String(value));\n  });\n\n  view.addSubview(arrowSpacingStepper);\n  // view.addSubview(formatter)\n\n  // Label: Auto Spacing Info\n  let arrowSpacingInfoLabel = alertLabel(\n    \"The second layer will be moved closer based on the value provided here. Keep it 0 if you don't want to have auto spacing feature \",\n    false,\n    -1,\n    viewHeight - 285,\n    300,\n    60\n  );\n  view.addSubview(arrowSpacingInfoLabel);\n\n  // Label: Other Settings\n  let otherSettingsLabel = alertLabel(\n    \"Other Settings\",\n    true,\n    -1,\n    viewHeight - 330,\n    280,\n    40\n  );\n  view.addSubview(otherSettingsLabel);\n\n  // Checkbox: Auto-Align\n  let checkAutoAlign = alertCheckbox(\n    \"Second layer auto-align\",\n    \"autoAlign\",\n    -1,\n    viewHeight - 340,\n    260,\n    40\n  );\n  view.addSubview(checkAutoAlign);\n\n  // Label: Auto-Align Info\n  let autoAlignInfoLabel = alertLabel(\n    \"Align the second layer for 5px misalignment with the first one\",\n    false,\n    -1,\n    viewHeight - 370,\n    280,\n    40\n  );\n  view.addSubview(autoAlignInfoLabel);\n\n  // Checkbox: Auto-Draw\n  let checkAutoDraw = alertCheckbox(\n    \"Redraw arrows after moving/resizing layers\",\n    \"autoDraw\",\n    -1,\n    viewHeight - 410,\n    300,\n    40\n  );\n  view.addSubview(checkAutoDraw);\n\n  // Label: Auto-Draw Info\n  let autoDrawInfoLabel = alertLabel(\n    \"If you have performance issues, try to turn this option off\",\n    false,\n    -1,\n    viewHeight - 440,\n    280,\n    40\n  );\n  view.addSubview(autoDrawInfoLabel);\n\n  // Label: Plugin Info\n  let pluginInfoLabel = alertLabel(\n    \"Made by @faridSabitov with the support of EPAM.com ❤️\",\n    true,\n    -1,\n    viewHeight - 490,\n    280,\n    40\n  );\n  view.addSubview(pluginInfoLabel);\n\n  // Need to check if style is still available\n\n  // Show modal and get the results\n  let modalResponse = alert.runModal();\n\n  if (modalResponse == NSAlertFirstButtonReturn) {\n    // When user clicks on \"Update Settings\"\n    // Need to save all this results into the Plugin Settings\n    context.command.setValue_forKey_onLayer_forPluginIdentifier(\n      alert\n        .views()[0]\n        .subviews()[1]\n        .title(),\n      \"arrowStyle\",\n      docData,\n      pluginKey\n    );\n    Settings.setSettingForKey(\n      \"arrowType\",\n      alert\n        .views()[0]\n        .subviews()[4]\n        .title()\n    );\n    Settings.setSettingForKey(\n      \"arrowSpacing\",\n      alert\n        .views()[0]\n        .subviews()[8]\n        .intValue()\n    );\n    Settings.setSettingForKey(\n      \"autoAlign\",\n      alert\n        .views()[0]\n        .subviews()[12]\n        .state()\n    );\n    Settings.setSettingForKey(\n      \"autoDraw\",\n      alert\n        .views()[0]\n        .subviews()[14]\n        .state()\n    );\n    UI.message(\"Settings are updated 🚀\");\n  }\n}\n\n// Functions\n\nfunction setActiveStyleSetting(arrowStylingField) {\n  let docSettings = context.command.valueForKey_onLayer_forPluginIdentifier(\n    \"arrowStyle\",\n    docData,\n    pluginKey\n  );\n  let styles = getLayerStyles(null, docData);\n\n  if (docSettings) {\n    // We have info about the settings in the current document\n\n    if (docSettings != \"Default Style\") {\n      // if user specified own option\n      arrowStylingField.addItemWithTitle(docSettings);\n      arrowStylingField.addItemWithTitle(\"Default Style\");\n      for (let i = 0; i < styles.length; i++) {\n        if (styles[i].name() != docSettings) {\n          arrowStylingField.addItemWithTitle(styles[i].name());\n        }\n      }\n    } else {\n      // Need to show the default first\n      arrowStylingField.addItemWithTitle(\"Default Style\");\n      for (let i = 0; i < styles.length; i++) {\n        arrowStylingField.addItemWithTitle(styles[i].name());\n      }\n    }\n  } else {\n    arrowStylingField.addItemWithTitle(\"Default Style\");\n    for (let i = 0; i < styles.length; i++) {\n      arrowStylingField.addItemWithTitle(styles[i].name());\n    }\n  }\n}\n\nfunction setActiveTypeSetting(arrowTypeField) {\n  let docTypeSettings = Settings.settingForKey(\"arrowType\");\n\n  if (docTypeSettings) {\n    // We have info about the settings in the current document\n\n    if (docTypeSettings == \"Angled\") {\n      arrowTypeField.addItemWithTitle(\"Angled\");\n      arrowTypeField.lastItem().setState(1);\n      arrowTypeField.addItemWithTitle(\"Curved\");\n      arrowTypeField.lastItem().setState(0);\n      arrowTypeField.addItemWithTitle(\"Straight\");\n      arrowTypeField.lastItem().setState(0);\n    }\n\n    if (docTypeSettings == \"Curved\") {\n      arrowTypeField.addItemWithTitle(\"Curved\");\n      arrowTypeField.lastItem().setState(1);\n      arrowTypeField.addItemWithTitle(\"Straight\");\n      arrowTypeField.lastItem().setState(0);\n      arrowTypeField.addItemWithTitle(\"Angled\");\n      arrowTypeField.lastItem().setState(0);\n    }\n\n    if (docTypeSettings == \"Straight\") {\n      arrowTypeField.addItemWithTitle(\"Straight\");\n      arrowTypeField.lastItem().setState(1);\n      arrowTypeField.addItemWithTitle(\"Angled\");\n      arrowTypeField.lastItem().setState(0);\n      arrowTypeField.addItemWithTitle(\"Curved\");\n      arrowTypeField.lastItem().setState(0);\n    }\n  } else {\n    // Show default\n    arrowTypeField.addItemWithTitle(\"Angled\");\n    arrowTypeField.addItemWithTitle(\"Curved\");\n    arrowTypeField.addItemWithTitle(\"Straight\");\n  }\n}\n\nfunction alertSetup(alert, viewWidth, viewHeight) {\n  // Title\n  alert.setMessageText(\"Arrow Plugin Settings\");\n\n  // Creating dialog buttons\n  alert.addButtonWithTitle(\"Update Settings\");\n  alert.addButtonWithTitle(\"Cancel\");\n\n  return alert;\n}\n\nfunction alertLabel(message, state, x, y, width, height) {\n  let infoLabel = NSTextField.alloc().initWithFrame(\n    NSMakeRect(x, y, width, height)\n  );\n\n  infoLabel.setStringValue(message);\n  infoLabel.setSelectable(false);\n  infoLabel.setDrawsBackground(false);\n  infoLabel.setBezeled(false);\n\n  if (state == false) {\n    infoLabel.textColor = NSColor.disabledControlTextColor();\n  }\n\n  return infoLabel;\n}\n\nfunction alertCheckbox(message, state, x, y, width, height) {\n  let checkbox = NSButton.alloc().initWithFrame(\n    NSMakeRect(x, y, width, height)\n  );\n\n  checkbox.setButtonType(NSSwitchButton);\n  checkbox.setBezelStyle(0);\n  checkbox.setTitle(message);\n\n  let currentState = Settings.settingForKey(state);\n  checkbox.setState(currentState);\n\n  return checkbox;\n}\n\n\n","import sketch from 'sketch';\nconst pluginKey = \"flowArrows\";\n// let document = sketch.fromNative(context.document);\n// let docData = context.document.documentData();\n\nexport function styleLine(line, style, docData){ // Refactored\n    let localStyle;\n    \n    if(style != null){ \n      // For updates\n      if(getLayerStyles(style, docData) != null && style != \"Default Style\"){\n        // If style is specified\n        localStyle = style;\n        let ownStyle = getLayerStyles(style, docData);\n        line.sharedStyle = ownStyle[0];\n      } else {\n        // if there is no specific style\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      }\n    } else {\n      // For creating new\n      if(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != null && context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey) != \"Default Style\"){\n        // we have settins almost all the time and it's not default\n        localStyle = getLayerStyles(context.command.valueForKey_onLayer_forPluginIdentifier(\"arrowStyle\", docData, pluginKey), docData);\n        line.sharedStyle = localStyle[0];\n        localStyle = localStyle[0].name();\n      } else {\n        localStyle = \"Default Style\";\n        let border = line.style().addStylePartOfType(1);\n        border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1});\n        border.thickness = 2;\n        line.style().endMarkerType = 2;\n      } \n    }\n  \n    return localStyle;\n}\n\nexport function getLayerStyles(name, docData) { // Refactored\n    let allStyles = docData.allLayerStyles();\n    let keyword = \"$arrow\";\n    let styles = [];\n  \n    for(let i = 0; i < allStyles.count(); i++){\n      if(name == null) {\n        if(allStyles[i].name().includes(keyword)){styles.push(allStyles[i]);}\n      } else {\n        if(allStyles[i].name() == name){styles.push(allStyles[i]);}\n      }\n    }\n      return styles;\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}