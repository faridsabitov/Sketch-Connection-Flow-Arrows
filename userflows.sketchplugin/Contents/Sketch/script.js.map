{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/script.js","webpack://exports/external \"sketch\"","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/ui\"","webpack://exports/external \"util\""],"names":["require","toArray","UI","Group","pluginKey","connections","document","sketch","fromNative","context","page","selectedPage","docData","documentData","connectionsDatabase","command","valueForKey_onLayer_forPluginIdentifier","currentParentGroup","currentPage","currentArtboard","selection","currentGroup","lineAvailable","lineObject","i","layers","count","name","class","firstLayerPos","frame","firstLayerPosX","maxX","firstLayerPosY","midY","firstObject","objectID","secondLayerPos","secondLayerPosX","minX","secondLayerPosY","secondObject","message","checkConnections","x","width","style","endMarkerType","setIsFlippedVertical","y","height","middlePosX","middlePosY","path","NSBezierPath","bezierPath","moveToPoint","NSMakePoint","lineToPoint","line","MSShapeGroup","layerWithPath","MSPath","pathWithBezierPath","points","cornerRadius","setName","border","addStylePartOfType","color","MSColor","colorWithRGBADictionary","r","g","b","a","thickness","connection","connectionsArray","length","push","setValue_forKey_onLayer_forPluginIdentifier","addLayers","group","parent","locked","moveToBack","updateArrows","updateLayerNames","settings","options","getSelectionFromUser","ok","value","log","sharedLayerStylesForContext","dict","sketchVersion","sketchVersion51","doc","actionContext","localStyles","layerStyles","sharedStyles","foreignStyles","valueForKeyPath","availableStyles","arrayByAddingObjectsFromArray","predicate","NSPredicate","predicateWithFormat","borderStyles","filteredArrayUsingPredicate","loop","objectEnumerator","sharedStyle","nextObject","multiplyLayerByXY","layer","xScale","yScale","scaledRect","origin","rect","size","z"],"mappings":"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","file":"script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script.js\");\n","import sketch from 'sketch'\nconst { toArray } = require('util')\n\n//\n//  Variables\n//\n\nvar UI = require('sketch/ui')\nvar Group = require('sketch/dom').Group\nvar pluginKey = \"flowArrows\"\nvar connections = []\nconst document = sketch.fromNative(context.document)\nconst page = document.selectedPage\nvar docData = context.document.documentData()\nvar connectionsDatabase = context.command.valueForKey_onLayer_forPluginIdentifier(\"connections\", docData, pluginKey)\nvar currentParentGroup = docData.currentPage().currentArtboard() || docData.currentPage()\nvar selection = context.selection\nvar currentGroup\n\n// Saying that there is no line\nvar lineAvailable = false\nvar lineObject\n\n\n//\n//  Default Function\n//\n\nexport default function() {\n\n  // Checking all the groups that we have\n  for(var i = 0; i < currentParentGroup.layers().count(); i++){\n    if(currentParentGroup.layers()[i].name() == \"Arrows\") {\n      // If we already have \"Arrow\" group we need to save it's folder\n      currentGroup = currentParentGroup.layers()[i]\n    } \n  }\n\n  if(selection.count() == 2){\n    // When user selected two layers\n\n    for(var i = 0; i < selection.count(); i++){\n      \n      // Checking through all selected layers\n      if(selection[i].class() == \"MSSymbolInstance\" || selection[i].class() == \"MSRectangleShape\" || selection[i].class() == \"MSLayerGroup\"){\n        // If it's symbol, shape or a group\n        \n        // First Layer Position Start Point Position\n        var firstLayerPos = selection[0].frame()\n        var firstLayerPosX = firstLayerPos.maxX()\n        var firstLayerPosY = firstLayerPos.midY()\n        \n        // Saving object ID for not recreating new arrows\n        var firstObject = selection[0].objectID()\n        \n        // Second Layer Position End Point Position\n        var secondLayerPos = selection[1].frame()\n        var secondLayerPosX = secondLayerPos.minX()\n        var secondLayerPosY = secondLayerPos.midY()\n        // Saving object ID for not recreating new arrows\n        var secondObject = selection[1].objectID()\n\n        \n      \n      } else {\n        \n        // If it's not an appropriate layer\n        sketch.UI.message(\"Only groups, shapes and symbols are supported\")\n      }\n    }\n  } else {\n    // When user didn't select anything\n    sketch.UI.message(\"Please select only two layers\")\n  }\n\n  // if there is a line in Plugin Database, we are showing it\n  lineObject = checkConnections(firstObject,secondObject)\n  \n  if(lineAvailable) {\n    // if line is available\n\n    // need to specify new size and location for the arrow shape\n    lineObject.frame().x = firstLayerPos.maxX()\n    lineObject.frame().width = secondLayerPos.minX() - firstLayerPos.maxX()\n    lineObject.style().endMarkerType = 2\n    \n    if(firstLayerPos.midY() < secondLayerPos.midY()){\n      // second object is higher\n      lineObject.setIsFlippedVertical(false)\n      lineObject.frame().y = firstLayerPos.midY()\n      lineObject.frame().height = secondLayerPos.midY() - firstLayerPos.midY()\n      \n    } else {\n      // second object is lower\n      lineObject.setIsFlippedVertical(true)\n      lineObject.frame().y = secondLayerPos.midY()\n      lineObject.frame().height = firstLayerPos.midY() - secondLayerPos.midY()\n    }\n  } else {\n    // if we don't have a line, need to create a new one\n\n    // Middle Points\n    var middlePosX = (firstLayerPosX + secondLayerPosX)/2\n    var middlePosY = (firstLayerPosY + secondLayerPosY)/2\n\n    // Drawing a line\n    var path = NSBezierPath.bezierPath()\n  \n    // Adding points\n    path.moveToPoint(NSMakePoint(firstLayerPosX,firstLayerPosY))\n    path.lineToPoint(NSMakePoint(middlePosX,firstLayerPosY))\n    path.lineToPoint(NSMakePoint(middlePosX,secondLayerPosY))\n    path.lineToPoint(NSMakePoint(secondLayerPosX,secondLayerPosY))\n\n    // Painting the line\n    var line = MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(path))\n    \n    // Making middle points rounded\n    var points = line.layers().firstObject().points()\n    points[1].cornerRadius = 20\n    points[2].cornerRadius = 20\n\n    // Providing Settings for the arrow\n    line.setName(\"Arrow\")\n\n    // Styling Border Style\n    var border = line.style().addStylePartOfType(1)\n    border.color = MSColor.colorWithRGBADictionary({r: 0.89, g: 0.89, b: 0.89, a: 1})\n    border.thickness = 2\n    line.style().endMarkerType = 2\n\n    if(connectionsDatabase){\n      connections = context.command.valueForKey_onLayer_forPluginIdentifier(\"connections\", docData, pluginKey)\n    }\n\n    // Adding current connection to the all connections\n    // Storage for current connection\n    var connection = {\n      firstObject : firstObject,\n      secondObject : secondObject,\n      line : line.objectID()\n    }\n\n    let connectionsArray = []\n    for (let i = 0; i < connections.length; i ++) {\n      connectionsArray.push(connections[i])\n    }\n\n    connectionsArray.push(connection)\n\n    // Saving Connection Info to Sketch Plugin\n    context.command.setValue_forKey_onLayer_forPluginIdentifier(connectionsArray, \"connections\", docData, pluginKey)\n    // log(context.command.valueForKey_onLayer_forPluginIdentifier(\"connections\", docData, pluginKey))\n\n    \n\n    if(currentGroup){\n      // If we already have group\n      currentGroup.addLayers([line])\n\n    } else {\n      // If we don't have a group\n      // Creating a group\n      var group = new Group({\n        parent: currentParentGroup,\n        name: 'Arrows',\n        locked: true,\n        layers: [line]\n      })\n\n      // Moving this group to the bottom of the page\n      group.moveToBack()\n    }\n  }\n}\n\n//\n// Functions\n//\n\nexport function updateArrows(context) {\n  const document = sketch.fromNative(context.document)\n  // TODO: Need to show amount of updated arrows and deleted ones\n  // TODO: Need to make a function that will delete arrows and connection itself, if there is no object\n  sketch.UI.message(\"All arrows are updated ðŸš€\")\n  // TO DO: Make a function for redrawing all the points\n}\n\nexport function updateLayerNames(context) {\n  const document = sketch.fromNative(context.document)\n  sketch.UI.message(\"All Layers are updated ðŸŽ‰\")\n}\n\nexport function settings(context) {\n  // Shop Popup for asking arrow type\n  var options = ['Link Arrow', 'Back Arrow']\n  var selection = UI.getSelectionFromUser(\n    \"Please choose link type\", options\n  )\n\n  var ok = selection[2]\n  var value = options[selection[1]]\n  \n  if (ok) {\n    // If user specified decision\n    log(value)\n  }\n}\n\n\nvar sharedLayerStylesForContext = function(context) {\n\n\tvar dict = {};\n\n\tif(sketchVersion < sketchVersion51) return dict;\n\n\tvar doc = context.document || context.actionContext.document,\n\t\tlocalStyles = doc.documentData().layerStyles().sharedStyles(),\n\t\tforeignStyles = doc.documentData().valueForKeyPath(\"foreignLayerStyles.@unionOfObjects.localSharedStyle\"),\n\t\tavailableStyles = localStyles.arrayByAddingObjectsFromArray(foreignStyles),\n\t\tpredicate = NSPredicate.predicateWithFormat(\"style.firstEnabledFill == nil\"),\n\t\tborderStyles = availableStyles.filteredArrayUsingPredicate(predicate),\n\t\tloop = borderStyles.objectEnumerator(),\n\t\tsharedStyle;\n\t\n\twhile(sharedStyle = loop.nextObject()) {\n\t\tdict[sharedStyle.objectID()] = sharedStyle;\n\t}\n\n\treturn dict;\n}\n\nfunction multiplyLayerByXY(layer,xScale,yScale) {\n  const scaledRect = {\n    origin: {\n      x: layer.rect().origin.x,\n      y: layer.rect().origin.y\n    },\n    size: {\n      width: layer.rect().size.width * xScale,\n      height: layer.rect().size.height * yScale\n    }\n  }\n  layer.rect = scaledRect;\n}\n\nfunction checkConnections(firstObject,secondObject) {\n  var lineObject\n  // Need to check if we have this information already\n  if(connectionsDatabase) {\n    // if we have connectionDatabase for this document\n    // Need to check if we have this connection already\n    for(var y = 0; y < connectionsDatabase.count(); y++){\n      \n      if(firstObject == connectionsDatabase[y].firstObject || firstObject == connectionsDatabase[y].secondObject){\n        // if we found that we have this object in connection database already\n        \n        if(secondObject == connectionsDatabase[y].firstObject || secondObject == connectionsDatabase[y].secondObject){\n          // if we found that we have this object in connection database already\n\n          // Do we have a line inside \"Arrows\" group?\n          // TODO: Need to add check system if we don't have group\n          for(var z = 0; z < currentGroup.layers().count(); z++){\n            if(currentGroup.layers()[z].objectID() == connectionsDatabase[y].line) {                      \n              // we have this line\n              lineAvailable = true\n              lineObject = currentGroup.layers()[z]\n            } \n          }\n        }\n      }\n    }\n    return lineObject\n  }\n}","module.exports = require(\"sketch\");","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/ui\");","module.exports = require(\"util\");"],"sourceRoot":""}